# 详细测试用例文档

## 概述

本文档记录了改进后的测试用例，旨在更全面地验证代谢模拟系统的正确性和稳定性。这些测试用例在原有基础上增加了更详细的约束条件和中间变量检查，以避免虚假通过的情况。

## 测试用例列表

### 1. TC-DETAILED-INSULIN-DEG

**目的**：验证胰岛素降解系统对胰岛素降解酶（IDE）活性的敏感性。

**方法**：
- 创建两个环境：一个高IDE活性（3.0），一个低IDE活性（0.05）
- 模拟餐后胰岛素刺激（20-50分钟）
- 运行180分钟模拟

**约束条件**：
- 高IDE活性环境下胰岛素水平应低于低IDE活性环境（1小时和2小时时间点）
- 高IDE活性环境下胰岛素降解速率应高于低IDE活性环境
- 高IDE活性环境下最终胰岛素水平应低于低IDE活性环境

**新增约束**：
- 检查胰岛素降解的速率，确保高IDE环境下降解速率更快
- 检查多个中间时间点的胰岛素水平，确保一致性

### 2. TC-DETAILED-ETHANOL

**目的**：验证乙醇代谢途径的正确性，包括乙醇→乙醛→乙酸的转化过程。

**方法**：
- 创建正常肝功能环境（1.0）
- 在10分钟时注入5.0单位的乙醇
- 运行240分钟模拟

**约束条件**：
- 乙醇浓度应下降至少50%
- 乙醛应出现峰值（>0.5）
- 乙酸浓度应上升

**新增约束**：
- 乙醛峰值应出现在0.3-2.5小时之间
- NADH浓度应增加
- NAD+浓度应减少

### 3. TC-DETAILED-BILIRUBIN

**目的**：验证胆红素结合过程的正确性，包括间接胆红素→直接胆红素的转化。

**方法**：
- 创建正常肝功能环境（1.0）
- 初始间接胆红素设置为1.0
- 初始UDPGA设置为5.0
- 运行180分钟模拟

**约束条件**：
- 间接胆红素浓度应下降
- 直接胆红素浓度应上升
- UDPGA应被消耗

**新增约束**：
- 直接胆红素应至少为间接胆红素减少量的50%
- UDPGA消耗应至少为间接胆红素减少量的50%

### 4. TC-DETAILED-PHASEII

**目的**：验证相II代谢结合过程的正确性，包括中间体的降解和结合产物的生成。

**方法**：
- 创建正常肝功能环境（1.0）
- 初始UDPGA设置为6.0，PAPS设置为3.0，GSH设置为8.0
- 每20分钟注入0.8单位的外源性物质（共6次）
- 运行240分钟模拟

**约束条件**：
- 相I中间体浓度应下降至少70%
- 结合产物浓度应上升
- 所有辅基（UDPGA、PAPS、GSH）应被消耗

**新增约束**：
- 相I中间体应至少下降60%
- 各辅基应至少消耗10%

### 5. TC-DETAILED-CONSTRAINT-GLUCOSE

**目的**：验证糖代谢稳态的正确性，包括餐后血糖峰值回落和空腹期酮体生成。

**方法**：
- 创建正常环境
- 模拟两次餐后窗口（20-60分钟和180-220分钟），每次注入5.0单位葡萄糖
- 运行360分钟模拟

**约束条件**：
- 餐后血糖峰值应在2小时内回落
- 空腹期酮体应轻度上升
- 空腹期血糖应稳定（标准差<10.0）

**新增约束**：
- 血糖峰值应在初始值的1.1-2.0倍之间
- 酮体上升应在0.1-2.0之间

### 6. TC-DETAILED-CONSTRAINT-UREA

**目的**：验证尿素循环的正确性，包括氨→尿素的转化过程。

**方法**：
- 创建正常环境
- 在10分钟和40分钟时各注入2.0单位的氨
- 运行240分钟模拟

**约束条件**：
- 注入氨后尿素浓度应上升
- 氨浓度应先上升后下降，最终低于峰值的60%

**新增约束**：
- 尿素上升量应至少为氨下降量的30%

### 7. TC-DETAILED-CONSTRAINT-ALBUMIN

**目的**：验证白蛋白代谢的正确性，包括白蛋白的合成和稳定范围。

**方法**：
- 创建正常环境
- 模拟餐后窗口（30-120分钟），每20分钟注入0.2单位的氨基酸
- 运行360分钟模拟

**约束条件**：
- 白蛋白浓度应在30-70之间
- 餐后白蛋白浓度应高于餐前

**新增约束**：
- 白蛋白合成速率应非负
- 氨基酸消耗应非负

### 8. TC-DETAILED-CONSTRAINT-LIPID

**目的**：验证脂代谢的正确性，包括脂肪酸降解和甘油三酯合成。

**方法**：
- 创建正常环境
- 在20分钟时注入10.0单位的脂肪酸
- 在180分钟时注入8.0单位的甘油三酯
- 模拟餐后窗口（20-80分钟和180-240分钟）
- 运行360分钟模拟

**约束条件**：
- 脂肪酸浓度应下降至少70%
- 甘油三酯浓度应上升
- 甘油三酯浓度不应无限增加（最终值≤初始值的1.8倍）

**新增约束**：
- 脂肪酸应至少下降60%
- 甘油三酯上升应在1.1-1.8倍之间

## 测试结果分析

运行详细测试用例后，应分析以下方面：

1. **中间变量变化**：检查各代谢途径的中间产物浓度变化，确保符合预期
2. **反应速率**：检查各代谢反应的速率，确保在合理范围内
3. **辅因子消耗**：检查各代谢途径的辅因子消耗情况，确保与反应需求匹配
4. **稳态维持**：检查系统在长期模拟中的稳定性，确保不会出现异常波动

## 结论

通过这些详细测试用例，可以更全面地验证代谢模拟系统的正确性，避免虚假通过的情况。测试结果将为系统的进一步改进和优化提供依据。
