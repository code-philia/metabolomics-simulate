id: REQ-ROOT
name: 人体代谢与调控系统
functional_description: >
  描述人体在稳态条件下，对营养物质、内源/外源化合物进行代谢、转化、
  合成、分泌以及通过激素-神经-免疫信号进行整体调控的功能需求体系。
scenarios: []
children:

  # =========================
  # 环境模块（全局）
  # =========================
  - id: ENV-1
    name: 代谢环境模块
    functional_description: >
      提供统一的代谢物池、能量状态、激素水平、离子浓度和环境参数，
      所有功能模块仅可从此模块读取输入，并将输出写回。
    feature_description:
      inputs:
        metabolites:
          - 葡萄糖
          - 糖原
          - 脂肪酸
          - 甘油
          - 氨基酸
          - 氨
          - 尿素
          - 胆固醇
          - 胆汁酸
          - ATP / ADP / AMP
          - NADH / NAD+ / FADH2
          - 酮体
          - 间接胆红素
          - 直接胆红素
          - UDP-葡萄糖醛酸 (UDPGA)
          - PAPS (3'-磷酸腺苷-5'-磷酸硫酸酯)
          - 谷胱甘肽 (GSH)
        signals:
          - 胰岛素
          - 胰高血糖素
          - 肾上腺素
          - 皮质醇
          - 甲状腺激素
          - 炎症因子
        parameters:
          - 氧分压
          - pH
          - 温度
          - 渗透压
      outputs:
        description: 所有代谢模块的产物和信号均回写至本模块
    scenarios: []

  # =========================
  # 顶层模块 1：营养代谢
  # =========================
  - id: REQ-1
    name: 营养代谢
    functional_description: >
      对摄入或储存的碳水化合物、脂类和氨基酸进行分解、合成和相互转化，
      以满足机体能量供应和物质合成需求。
    children:

      # -------- 碳水代谢 --------
      - id: REQ-1-1
        name: 碳水化合物代谢
        functional_description: >
          调节葡萄糖的利用、储存和生成，维持血糖稳态。
        children:

          - id: REQ-1-1-1
            name: 糖原合成
            functional_description: >
              在能量充足状态下，将葡萄糖转化为糖原进行储存。
            children:
              - id: REQ-1-1-1-1
                name: 磷酸葡萄糖变位酶反应
                feature_description:
                  inputs:
                    metabolites: [葡萄糖-6-磷酸 (G6P)]
                    enzymes: [磷酸葡萄糖变位酶 (PGM)]
                  outputs:
                    metabolites: [葡萄糖-1-磷酸 (G1P)]
                  compartment: [细胞质]
                control_conditions:
                  - id: CC-REQ-1-1-1-1-01
                    condition: 平衡反应
                    logic: always_active
                    action: equilibrate_reaction()
                    mechanism: 可逆反应，方向取决于浓度
                    required_context: []

              - id: REQ-1-1-1-2
                name: UDP-葡萄糖生成
                feature_description:
                  inputs:
                    metabolites: [G1P, UTP]
                    enzymes: [UDP-葡萄糖焦磷酸化酶]
                  outputs:
                    metabolites: [UDP-葡萄糖, PPi]
                  notes: PPi随后被焦磷酸酶迅速水解，拉动反应向右进行
                control_conditions:
                  - id: CC-REQ-1-1-1-2-01
                    condition: 产物移除驱动
                    logic: env.metabolites.PPi < threshold.low
                    action: drive_reaction_forward()
                    mechanism: 焦磷酸水解提供热力学驱动力
                    required_context: [pyrophosphatase == active]

              - id: REQ-1-1-1-3
                name: 糖原合酶反应
                functional_description: 糖原合成的限速步骤。
                feature_description:
                  inputs:
                    metabolites: [UDP-葡萄糖, 糖原引物]
                    signals: [胰岛素]
                    regulators: [G6P, ATP, AMP]
                    enzymes: [糖原合酶 (GS)]
                  outputs:
                    metabolites: [糖原 (n+1), UDP]
                control_conditions:
                  - id: CC-REQ-1-1-1-3-01
                    condition: 胰岛素激活
                    logic: env.signals.insulin > threshold.high
                    action: activate_enzyme(Glycogen_Synthase)
                    mechanism: 通过PI3K/Akt/GSK3β通路，使GS去磷酸化而激活
                    required_context: [insulin_signaling == functional]
                  - id: CC-REQ-1-1-1-3-02
                    condition: 变构激活
                    logic: env.metabolites.G6P > threshold.activation
                    action: activate_enzyme(Glycogen_Synthase)
                    mechanism: G6P变构激活GS
                    required_context: []
                  - id: CC-REQ-1-1-1-3-03
                    condition: 能量状态调节
                    logic: env.metabolites.ATP / env.metabolites.AMP > threshold.energy_high
                    action: enable_reaction(Glycogen_Synthase)
                    mechanism: 高能状态利于合成
                    required_context: []

              - id: REQ-1-1-1-4
                name: 分支酶反应
                feature_description:
                  inputs:
                    metabolites: [直链糖原]
                    enzymes: [分支酶]
                  outputs:
                    metabolites: [支链糖原]
                  notes: 增加溶解度和非还原末端数量
                control_conditions:
                  - id: CC-REQ-1-1-1-4-01
                    condition: 链长依赖
                    logic: glycogen_chain_length > 11
                    action: create_branch()
                    mechanism: 当直链长度足够时进行分支转移
                    required_context: []

          - id: REQ-1-1-2
            name: 糖原分解
            functional_description: >
              在血糖降低或能量需求增加时分解糖原生成葡萄糖。
            feature_description:
              inputs:
                metabolites:
                  - 糖原
                  - Pi
                signals:
                  - 胰高血糖素
                  - 肾上腺素
                cofactors:
                  - 吡哆醛磷酸 (PLP) (糖原磷酸化酶活性依赖)
              tools:
                - 糖原磷酸化酶
                - 去支链酶
              compartment: [细胞质, 肝胞]
              outputs:
                metabolites:
                  - 葡萄糖-1-磷酸
                  - 葡萄糖 (肝脏可释放至血浆)
                  - 无机磷 (Pi)
              notes: 部分产物经转化后参与糖酵解或释放入血
            control_conditions:
              - id: CC-REQ-1-1-2-01
                condition: 胰高血糖素升高
                logic: env.signals.glucagon > threshold.high
                action: activate_enzyme(Glycogen_Phosphorylase); inhibit_enzyme(Glycogen_Synthase)
                mechanism: 激活cAMP-PKA通路，磷酸化相关酶
                required_context: [insulin_level < threshold.low]
              - id: CC-REQ-1-1-2-02
                condition: 应激状态
                logic: env.signals.adrenaline > threshold.high
                action: maximize_pathway_flux(Glycogen_Breakdown)
                mechanism: 肾上腺素提升cAMP，强力激活糖原分解
                required_context: [sympathetic_activity == high]
              - id: CC-REQ-1-1-2-03
                condition: 血糖降低
                logic: env.metabolites.glucose < threshold.low
                action: trigger_release(Glucagon)
                mechanism: 低血糖触发激素分泌，间接启动分解
                required_context: [glycogen_reserve > 0]

          - id: REQ-1-1-3
            name: 糖异生
            functional_description: >
              以非糖前体合成葡萄糖，用于长期禁食或高能耗状态。
            feature_description:
              inputs:
                metabolites:
                  - 乳酸
                  - 甘油
                  - 生糖氨基酸（丙氨酸、谷氨酰胺等）
                  - ATP
                  - GTP
                  - NADH (在需要时)
                signals:
                  - 胰高血糖素
                  - 皮质醇
                enzymes:
                  - PEPCK
                  - G6Pase
              compartment: [细胞质, 线粒体]
              outputs:
                metabolites:
                  - 葡萄糖
                  - ADP
                  - GDP
                  - NAD+
              notes: 产物可被肝脏释放至血浆以维持血糖
            control_conditions:
              - id: CC-REQ-1-1-3-01
                condition: 长时间禁食
                logic: time_since_last_meal > threshold.fasting_duration
                action: upregulate_gene(PEPCK); upregulate_gene(G6Pase)
                mechanism: 促进底物供给与关键酶表达
                required_context: [precursors_available == true]
              - id: CC-REQ-1-1-3-02
                condition: 胰岛素水平低
                logic: env.signals.insulin < threshold.low
                action: de_repress(Gluconeogenesis_Pathway)
                mechanism: 解除胰岛素对糖异生关键酶的抑制
                required_context: [glucagon_or_cortisol_present == true]
              - id: CC-REQ-1-1-3-03
                condition: ATP供应充足
                logic: env.metabolites.ATP > threshold.maintenance
                action: allow_reaction(Gluconeogenesis)
                mechanism: 糖异生为耗能过程，需要ATP驱动
                required_context: [energy_status == sufficient]

          - id: REQ-1-1-4
            name: 糖酵解
            functional_description: >
              将葡萄糖分解为丙酮酸，生成ATP和NADH，是大多数细胞的主要供能路径。
            children:
              - id: REQ-1-1-4-1
                name: 葡萄糖磷酸化 (Step 1)
                functional_description: 葡萄糖进入细胞后的首步反应，锁定葡萄糖。
                feature_description:
                  inputs:
                    metabolites: [葡萄糖, ATP]
                    enzymes: [己糖激酶 (HK), 葡萄糖激酶 (GK, 肝脏)]
                    cofactors: [Mg2+]
                  outputs:
                    metabolites: [葡萄糖-6-磷酸 (G6P), ADP]
                  compartment: [细胞质]
                control_conditions:
                  - id: CC-REQ-1-1-4-1-01
                    condition: 产物抑制 (HK)
                    logic: env.metabolites.G6P > threshold.inhibition
                    action: inhibit_enzyme(Hexokinase)
                    mechanism: 变构抑制
                    required_context: [tissue != liver]
                  - id: CC-REQ-1-1-4-1-02
                    condition: 胰岛素诱导 (GK)
                    logic: env.signals.insulin > threshold.high
                    action: upregulate_gene(Glucokinase)
                    mechanism: 胰岛素促进肝脏GK转录
                    required_context: [tissue == liver]

              - id: REQ-1-1-4-2
                name: 磷酸果糖激酶-1 反应 (Step 3)
                functional_description: 糖酵解的关键限速步骤。
                feature_description:
                  inputs:
                    metabolites: [果糖-6-磷酸 (F6P), ATP]
                    regulators: [ATP, AMP, 柠檬酸, 果糖-2,6-二磷酸]
                    enzymes: [PFK-1]
                  outputs:
                    metabolites: [果糖-1,6-二磷酸 (F1,6BP), ADP]
                control_conditions:
                  - id: CC-REQ-1-1-4-2-01
                    condition: 能量充足抑制
                    logic: env.metabolites.ATP > threshold.high
                    action: inhibit_enzyme(PFK-1)
                    mechanism: ATP作为变构抑制剂降低酶对F6P亲和力
                    required_context: []
                  - id: CC-REQ-1-1-4-2-02
                    condition: 能量匮乏激活
                    logic: env.metabolites.AMP > threshold.activation
                    action: activate_enzyme(PFK-1)
                    mechanism: AMP解除ATP的抑制作用
                    required_context: []
                  - id: CC-REQ-1-1-4-2-03
                    condition: 信号分子激活
                    logic: env.metabolites.F26BP > threshold.activation
                    action: activate_enzyme(PFK-1)
                    mechanism: F2,6BP是强效变构激活剂，受胰岛素/胰高血糖素调节
                    required_context: []
                  - id: CC-REQ-1-1-4-2-04
                    condition: 下游反馈抑制
                    logic: env.metabolites.citrate > threshold.inhibition
                    action: inhibit_enzyme(PFK-1)
                    mechanism: 柠檬酸积累指示TCA循环饱和，反馈抑制糖酵解
                    required_context: []

              - id: REQ-1-1-4-3
                name: 丙酮酸激酶反应 (Step 10)
                functional_description: 产生ATP的终步反应。
                feature_description:
                  inputs:
                    metabolites: [磷酸烯醇式丙酮酸 (PEP), ADP]
                    regulators: [F1,6BP, ATP, 丙氨酸]
                    enzymes: [丙酮酸激酶 (PK)]
                  outputs:
                    metabolites: [丙酮酸, ATP]
                control_conditions:
                  - id: CC-REQ-1-1-4-3-01
                    condition: 前馈激活
                    logic: env.metabolites.F16BP > threshold.activation
                    action: activate_enzyme(PK)
                    mechanism: 上游产物F1,6BP前馈激活
                    required_context: []
                  - id: CC-REQ-1-1-4-3-02
                    condition: 能量充足抑制
                    logic: env.metabolites.ATP > threshold.high
                    action: inhibit_enzyme(PK)
                    mechanism: ATP变构抑制
                    required_context: []
                  - id: CC-REQ-1-1-4-3-03
                    condition: 激素调节 (肝脏)
                    logic: env.signals.glucagon > threshold.high
                    action: inhibit_enzyme(PK)
                    mechanism: PKA磷酸化导致PK失活，通过糖异生节约葡萄糖
                    required_context: [tissue == liver]

              - id: REQ-1-1-4-4
                name: 中间代谢步骤 (汇总)
                functional_description: 包括异构化、裂解、氧化磷酸化等平衡步骤。
                feature_description:
                  inputs:
                    metabolites: [G6P, F1,6BP, GAP, 1,3BPG, 3PG, 2PG]
                    enzymes: [PGI, Aldolase, GAPDH, PGK, PGM, Enolase]
                  outputs:
                    metabolites: [F6P, GAP, DHAP, 1,3BPG, 3PG, 2PG, PEP, NADH, ATP]
                control_conditions:
                  - id: CC-REQ-1-1-4-4-01
                    condition: 底物驱动
                    logic: always_active
                    action: equilibrate_reaction()
                    mechanism: 反应接近平衡，方向由底物/产物浓度决定
                    required_context: []

      # -------- 脂代谢 --------
      - id: REQ-1-2
        name: 脂类代谢
        functional_description: >
          调节脂肪酸和脂类的合成、分解及跨组织转运。
        children:

          - id: REQ-1-2-1
            name: 脂肪酸合成
            functional_description: >
              在能量和碳源充足时合成脂肪酸用于储能。
            feature_description:
              inputs:
                metabolites:
                  - 乙酰辅酶A
                  - Malonyl-CoA / 丙二酰-ACP
                  - NADPH
                  - ATP
                signals:
                  - 胰岛素
                enzymes:
                  - ACC (乙酰辅酶A羧化酶)
                  - 脂肪酸合成酶 (FAS)
              compartment: [细胞质]
              outputs:
                metabolites:
                  - 长链饱和脂肪酸（如棕榈酸）
                  - CoA
                  - NADP+
              notes: 合成产物可被酯化并转运/储存
            control_conditions:
              - id: CC-REQ-1-2-1-01
                condition: 高碳水摄入
                logic: env.metabolites.glucose > threshold.high && env.metabolites.acetyl_CoA > threshold.high
                action: increase_flux(Fatty_Acid_Synthesis)
                mechanism: 提供过剩碳源，推动脂肪酸合成
                required_context: [glycolysis_active == true]
              - id: CC-REQ-1-2-1-02
                condition: 胰岛素升高
                logic: env.signals.insulin > threshold.high
                action: activate_enzyme(ACC); upregulate_gene(FAS)
                mechanism: 上调ACC和FAS表达/活性
                required_context: [NADPH_source == sufficient]

          - id: REQ-1-2-2
            name: 脂肪酸分解（β-氧化）
            functional_description: >
              将脂肪酸分解以生成能量。
            feature_description:
              inputs:
                metabolites:
                  - 活化的长链脂酰-CoA
                  - 肉毒碱系统(用于跨膜运输)
                  - NAD+
                  - FAD
                signals:
                  - 胰高血糖素
                  - 低ATP/高AMP 信号
              compartment: [线粒体基质]
              outputs:
                metabolites:
                  - 乙酰辅酶A
                  - NADH
                  - FADH2
                notes: 产生的还原当量供氧化磷酸化生成ATP
            control_conditions:
              - id: CC-REQ-1-2-2-01
                condition: 能量需求增加
                logic: env.metabolites.ATP < threshold.low || env.metabolites.AMP > threshold.high
                action: activate_enzyme(AMPK); promote_transport(CPT1)
                mechanism: 激活AMPK，促进脂肪酸动员和β-氧化
                required_context: [carnitine_shuttle == functional]
              - id: CC-REQ-1-2-2-02
                condition: 胰岛素低
                logic: env.signals.insulin < threshold.low
                action: activate_enzyme(HSL); relieve_inhibition(Beta_Oxidation)
                mechanism: 解除对脂肪酶和β-氧化的抑制
                required_context: [glucagon_or_adrenaline == high]

          - id: REQ-1-2-3
            name: 脂类转运
            functional_description: >
              通过脂蛋白在组织间转运脂类。
            feature_description:
              inputs:
                metabolites:
                  - 甘油三酯 (乳糜微粒/VLDL)
                  - 游离脂肪酸 (与白蛋白结合)
                  - 甘油
                proteins:
                  - 载脂蛋白 (ApoB, ApoE 等)
              compartment: [血浆, 细胞外间隙, 细胞内脂滴]
              outputs:
                metabolites:
                  - 组织脂质储存 (甘油三酯, 胆固醇酯)
                effects:
                  - 脂类在组织间的分配与储存
                notes: 转运依赖脂蛋白代谢和膜受体/脂肪酶活性
            control_conditions:
              - id: CC-REQ-1-2-3-01
                condition: 餐后状态
                logic: env.state.is_postprandial == true
                action: promote_process(Lipid_Esterification); promote_process(Lipoprotein_Transport)
                mechanism: 胰岛素促进脂肪酯化及脂蛋白转运
                required_context: [intestinal_absorption == active]
              - id: CC-REQ-1-2-3-02
                condition: 血脂水平变化
                logic: env.metabolites.free_fatty_acids > threshold.high || env.metabolites.triglycerides > threshold.high
                action: trigger_process(Lipid_Uptake_Clearance)
                mechanism: 血脂升高触发转运与清除
                required_context: [lipoprotein_receptors == functional]

      # -------- 氨基酸代谢 --------
      - id: REQ-1-3
        name: 氨基酸代谢
        functional_description: >
          对氨基酸进行分解、再合成及转运。
        children:

          - id: REQ-1-3-1
            name: 氨基酸分解
            functional_description: >
              分解氨基酸用于供能或转化。
            feature_description:
              inputs:
                metabolites:
                  - 各类氨基酸
                cofactors:
                  - PLP (转氨酶依赖)
                signals:
                  - 高蛋白摄入信号
              compartment: [肝/肌肉细胞]
              outputs:
                metabolites:
                  - 游离氨 (NH3/NH4+)
                  - α-酮酸(碳骨架)
                notes: 氨进入谷氨酸/谷氨酰胺代谢或尿素循环
            control_conditions:
              - id: CC-REQ-1-3-1-01
                condition: 蛋白质摄入过量
                logic: env.metabolites.amino_acids > threshold.high
                action: increase_flux(AA_Catabolism); increase_flux(Transamination)
                mechanism: 氨基酸过剩促使分解与转氨
                required_context: [insulin_level > threshold.normal]
              - id: CC-REQ-1-3-1-02
                condition: 能量不足
                logic: env.metabolites.ATP < threshold.low && env.metabolites.glucose < threshold.low
                action: prioritize_substrate(Amino_Acids_for_Energy)
                mechanism: 能量短缺时分解氨基酸供能
                required_context: [energy_demand > supply]

          - id: REQ-1-3-2
            name: 氨基酸合成与转运
            functional_description: >
              合成非必需氨基酸并在组织间转运。
            feature_description:
              inputs:
                metabolites:
                  - 碳骨架 (α-酮酸)
                  - 氨/NH4+ 或 谷氨酰胺
                energy:
                  - ATP
                cofactors:
                  - NADPH (某些还原合成步骤)
              compartment: [细胞质, 线粒体]
              outputs:
                metabolites:
                  - 非必需氨基酸
                  - 谷氨酰胺 (作为氮转运体)
                effects:
                  - 支持蛋白质合成与组织修复
            control_conditions:
              - id: CC-REQ-1-3-2-01
                condition: 生长或修复需求
                logic: env.signals.growth_factors > threshold.high || env.signals.insulin > threshold.high
                action: upregulate_pathway(AA_Synthesis); increase_flux(Protein_Synthesis)
                mechanism: 生长因子上调合成以支持增殖
                required_context: [carbon_skeleton_available == true]

      # -------- 能量供应 --------
      - id: REQ-1-4
        name: 能量供应与稳态
        functional_description: >
          通过多种代谢路径维持ATP供应及内环境稳定。
        children:

          - id: REQ-1-4-1
            name: 有氧呼吸与ATP生成
            feature_description:
              inputs:
                metabolites:
                  - 葡萄糖
                  - 游离脂肪酸 / 酰基-CoA
                  - 氧 (O2)
                energy_acceptors:
                  - ADP, Pi
                cofactors:
                  - NADH, FADH2 (电子供体)
              compartment: [线粒体基质/内膜]
              outputs:
                metabolites:
                  - ATP
                  - CO2
                  - H2O
                side_products:
                  - 热量 (散失)
              notes: 依赖电子传递链完整性与膜电位耦合效率
            control_conditions:
              - id: CC-REQ-1-4-1-01
                condition: 氧充足
                logic: env.parameters.oxygen_pressure > threshold.normoxia
                action: enable_process(Oxidative_Phosphorylation)
                mechanism: 氧气支持电子传递链，生成ATP
                required_context: [mitochondria_functional == true]

          - id: REQ-1-4-2
            name: 酮体生成
            feature_description:
              inputs:
                metabolites:
                  - 乙酰辅酶A
                cofactors:
                  - NADH/NAD+
                signals:
                  - 低胰岛素/高胰高血糖素
              compartment: [肝线粒体]
              outputs:
                metabolites:
                  - 乙酰乙酸
                  - β-羟基丁酸
                  - 少量丙酮
                notes: 酮体被释放至血浆供其他组织氧化利用
            control_conditions:
              - id: CC-REQ-1-4-2-01
                condition: 长期饥饿
                logic: env.state.starvation_mode == true
                action: increase_flux(Ketogenesis)
                mechanism: 脂肪酸氧化过量，驱动酮体生成
                required_context: [fatty_acid_mobilization > threshold.high]
              - id: CC-REQ-1-4-2-02
                condition: 糖供应不足
                logic: env.metabolites.glucose < threshold.critical_low
                action: activate_pathway(Ketone_Body_Synthesis)
                mechanism: 低糖促使乙酰辅酶A转化为酮体
                required_context: [liver_ketogenesis_enzymes == functional]

  # =========================
  # 顶层模块 2：解毒
  # =========================
  - id: REQ-2
    name: 解毒（生物转化）
    functional_description: >
      将内源或外源有毒物质转化为可排泄的无毒形式。
    children:

      - id: REQ-2-1
        name: 氧化还原反应
        feature_description:
          inputs:
            metabolites:
              - 药物 / 外源物质
              - NADPH
              - O2
            proteins:
              - CYP450 酶系 (微粒体)
          compartment: [肝细胞内质网/微粒体]
          outputs:
            metabolites:
              - 氧化/还原中间产物
            side_effects:
              - 活性中间体, ROS 生成风险
          notes: 相I 产物可为相II 结合反应提供底物
        control_conditions:
          - id: CC-REQ-2-1-01
            condition: CYP450酶激活
            logic: env.enzymes.CYP450.activity > threshold.basal
            action: increase_rate(Phase_I_Metabolism)
            mechanism: 增强氧化/还原代谢活性
            required_context: [NADPH_supply == sufficient]

      - id: REQ-2-2
        name: 结合反应
        feature_description:
          inputs:
            metabolites:
              - 相I 代谢中间体
              - UDP-葡糖醛酸 (UDPGA)
              - PAPS (硫酸供体)
              - 谷胱甘肽 (GSH)
            enzymes:
              - UGT, SULT, GST 等转移酶
          compartment: [细胞质, 光面内质网]
          outputs:
            metabolites:
              - 结合产物（葡萄糖醛酸化/硫酸化/谷胱甘肽结合物）
            effects:
              - 水溶性增加，便于胆汁/尿排泄
        control_conditions:
          - id: CC-REQ-2-2-01
            condition: 前体充足
            logic: env.metabolites.UDPGA > threshold.min && env.metabolites.PAPS > threshold.min
            action: promote_reaction(Conjugation)
            mechanism: 辅基充足提高结合速率
            required_context: [cofactors_available == true]

      # —— 细化：典型I相与II相实例（源自 knowledges.md） ——
      - id: REQ-2-1-A
        name: 乙醇氧化（ADH）
        feature_description:
          inputs:
            metabolites:
              - 乙醇
              - NAD+
            enzymes:
              - 乙醇脱氢酶 (ADH)
          outputs:
            metabolites:
              - 乙醛
              - NADH
        control_conditions:
          - id: CC-REQ-2-1-A-01
            condition: 肝功能正常
            logic: env.parameters.liver_function >= threshold.normal
            action: increase_rate(ADH_Oxidation)
            mechanism: 肝细胞内ADH催化乙醇→乙醛
            required_context: [NAD_plus_available == true]
      - id: REQ-2-1-B
        name: 乙醛氧化（ALDH）
        feature_description:
          inputs:
            metabolites:
              - 乙醛
              - NAD+
            enzymes:
              - 醛脱氢酶 (ALDH)
          outputs:
            metabolites:
              - 乙酸
              - NADH
        control_conditions:
          - id: CC-REQ-2-1-B-01
            condition: 肝功能正常
            logic: env.parameters.liver_function >= threshold.normal
            action: increase_rate(ALDH_Oxidation)
            mechanism: 乙醛进一步氧化为乙酸
            required_context: [NAD_plus_available == true]

      - id: REQ-2-2-A
        name: 胆红素摄取与葡萄糖醛酸结合（UGT）
        functional_description: >
          将间接胆红素摄入肝细胞并结合为直接胆红素，以利排泄。
        feature_description:
          inputs:
            metabolites:
              - 间接胆红素
              - UDP-葡萄糖醛酸 (UDPGA)
            transporters:
              - OATP1B1/1B3
            enzymes:
              - UGT1A1
          compartment: [肝细胞, 光面内质网]
          outputs:
            metabolites:
              - 直接胆红素（胆红素二葡萄糖醛酸）
          notes: 直接胆红素更水溶，可经胆汁排泄
        control_conditions:
          - id: CC-REQ-2-2-A-01
            condition: UDPGA充足
            logic: env.metabolites.UDPGA > threshold.sufficient
            action: upregulate_enzyme(UGT1A1)
            mechanism: 辅酶供给充足时结合速率提升
            required_context: [transporters_functional == true]

      - id: REQ-2-2-B
        name: NAPQI 谷胱甘肽结合（GST）
        functional_description: >
          将对乙酰氨基酚相I生成的NAPQI与GSH结合以解毒。
        feature_description:
          inputs:
            metabolites:
              - NAPQI
              - 谷胱甘肽 (GSH)
            enzymes:
              - 谷胱甘肽 S-转移酶 (GST)
          outputs:
            metabolites:
              - NAPQI-GSH 结合物
          effects:
            - 降低NAPQI反应性，防止肝细胞损伤
        control_conditions:
          - id: CC-REQ-2-2-B-01
            condition: GSH充足
            logic: env.metabolites.GSH > threshold.sufficient
            action: promote_reaction(GST_Conjugation)
            mechanism: GSH耗竭将降低解毒能力
            required_context: [phase_I_active == true]

  # =========================
  # 顶层模块 3：合成与分泌
  # =========================
  - id: REQ-3
    name: 合成与分泌
    children:

      - id: REQ-3-1
        name: 胆汁酸合成与分泌
        feature_description:
          inputs:
            metabolites:
              - 胆固醇
              - NADPH
              - O2
            enzymes:
              - CYP7A1 等胆汁酸合成酶
          compartment: [肝细胞光面内质网]
          outputs:
            metabolites:
              - 初级胆汁酸（胆酸, 鹅去氧胆酸等）
              - 胆汁酸盐（甘氨/牛磺酸结合形式）
            effects:
              - 参与脂肪乳化与肠道吸收
        control_conditions:
          - id: CC-REQ-3-1-01
            condition: 脂类消化需求
            logic: env.signals.lipid_intake > 0 || env.state.enterohepatic_circulation_demand == high
            action: upregulate_enzyme(CYP7A1)
            mechanism: 脂肪摄入或循环需求上调合成
            required_context: [cholesterol_available == true]

      - id: REQ-3-2
        name: 血浆蛋白合成
        feature_description:
          inputs:
            metabolites:
              - 氨基酸（用于翻译）
            energy:
              - ATP, GTP
            machinery:
              - 核糖体, tRNA, SRP, 分泌途径
          compartment: [粗面内质网, 高尔基体]
          outputs:
            metabolites:
              - 分泌性血浆蛋白（白蛋白、转运蛋白等）
            effects:
              - 维持血浆胶体渗透压与运载功能
        control_conditions:
          - id: CC-REQ-3-2-01
            condition: 营养充足
            logic: env.metabolites.amino_acids > threshold.sufficient && env.metabolites.ATP > threshold.sufficient
            action: increase_rate(Protein_Translation)
            mechanism: 氨基酸和能量充足促进合成
            required_context: [ribosome_activity == normal]

      - id: REQ-3-3
        name: 凝血因子合成
        feature_description:
          inputs:
            metabolites:
              - 氨基酸
              - 维生素K（还原型）
            enzymes:
              - γ-羧化酶 (维生素K依赖)
          compartment: [肝细胞内质网/细胞质]
          outputs:
            metabolites:
              - 维生素K依赖凝血因子（Ⅱ, Ⅶ, Ⅸ, Ⅹ 等，初产物为不活化前体）
            effects:
              - 提供血凝所需蛋白质基础
        control_conditions:
          - id: CC-REQ-3-3-01
            condition: 损伤或凝血信号
            logic: env.signals.bleeding == true || env.signals.tissue_damage == true
            action: upregulate_pathway(Coagulation_Factor_Synthesis)
            mechanism: 出血/受损促使合成上调
            required_context: [vitamin_K_available == true]

  # =========================
  # 顶层模块 4：氮处理与尿素循环
  # =========================
  - id: REQ-4
    name: 氮处理与尿素循环
    functional_description: >
      将有毒氨转化为尿素排出体外。
    children:

      - id: REQ-4-1
        name: 尿素循环
        feature_description:
          inputs:
            metabolites:
              - 游离氨 (NH3/NH4+)
              - CO2 / HCO3-
              - ATP
              - 天冬氨酸 (作为第二氮源)
            enzymes:
              - CPS1, OTC, ASS1, ASL, ARG1
          compartment: [线粒体基质 (前两步), 细胞质 (后续步骤)]
          outputs:
            metabolites:
              - 尿素
              - 尿素循环中间产物（如延胡索酸/富马酸）
              - ADP, Pi
          notes: 尿素通过血液运输至肾脏以排泄
        control_conditions:
          - id: CC-REQ-4-1-01
            condition: 氨浓度升高
            logic: env.metabolites.ammonia > threshold.toxicity
            action: activate_enzyme(CPS1); increase_flux(Urea_Cycle)
            mechanism: 高氨诱导关键酶活性，增加尿素生成
            required_context: [ATP_available == true]

  # =========================
  # 顶层模块 5：激素-神经-免疫调控
  # =========================
  - id: REQ-5
    name: 激素-神经-免疫信号调控
    children:

      - id: REQ-5-1
        name: 激素信号接收与转导
        feature_description:
          inputs:
            signals:
              - 胰岛素
              - 胰高血糖素
              - 其他激素（生长激素, 皮质醇 等）
            receptors:
              - 受体表达与亲和性
            second_messengers:
              - cAMP, PIP3, Ca2+, DAG
          outputs:
            effects:
              - 酶活性调节（磷酸化/去磷酸化）
              - 基因表达调控
              - 代谢通路的整体激活或抑制
          compartment: [细胞膜, 细胞质, 细胞核]

      - id: REQ-5-2
        name: 神经信号整合
        feature_description:
          inputs:
            signals:
              - 交感神经递质 (去甲肾上腺素)
              - 副交感神经递质 (乙酰胆碱)
            receptors:
              - α/β 肾上腺素受体, Ach 受体
          outputs:
            effects:
              - 心血管与代谢调整（心率, 血流, 糖/脂代谢速率）
          notes: 快速神经调节以适应行为或环境需求

      - id: REQ-5-3
        name: 免疫信号交互
        feature_description:
          inputs:
            signals:
              - 炎症细胞因子（IL-6, TNF-α, IL-1β 等）
              - 免疫细胞分泌物（NO, ROS 等）
          outputs:
            effects:
              - 急性期反应蛋白上调
              - 代谢路径重编程（胰岛素敏感性改变, 糖异生产生）
          compartment: [系统性/组织局部]

      - id: REQ-5-4
        name: 信号分子代谢与降解
        functional_description: >
          调节激素和信号分子的半衰期，防止信号过度持续，确保调控的动态性。
        children:
          - id: REQ-5-4-1
            name: 胰岛素降解
            feature_description:
              inputs:
                signals:
                  - 胰岛素
                enzymes:
                  - 胰岛素降解酶 (IDE)
              compartment: [肝脏, 肾脏, 肌肉]
              outputs:
                metabolites:
                  - 氨基酸 / 肽片段
                effects:
                  - 降低血浆胰岛素水平，终止信号
            control_conditions:
              - id: CC-REQ-5-4-1-01
                condition: 基础降解
                logic: always_active
                action: degrade_signal(Insulin, rate_constant=k_deg)
                mechanism: 一级动力学降解
                required_context: []
              - id: CC-REQ-5-4-1-02
                condition: 受体介导内吞
                logic: env.signals.insulin > threshold.high
                action: increase_rate(Insulin_Degradation)
                mechanism: 激素-受体复合物内吞后在溶酶体降解
                required_context: [insulin_receptor_binding == active]

          - id: REQ-5-4-2
            name: 胰高血糖素降解
            feature_description:
              inputs:
                signals:
                  - 胰高血糖素
                enzymes:
                  - 二肽基肽酶-4 (DPP-4) 等
              compartment: [肝脏, 肾脏, 血浆]
              outputs:
                metabolites:
                  - 失活肽片段
            control_conditions:
              - id: CC-REQ-5-4-2-01
                condition: 酶解失活
                logic: always_active
                action: degrade_signal(Glucagon)
                mechanism: 血浆或组织蛋白酶水解
                required_context: []

          - id: REQ-5-4-3
            name: 儿茶酚胺灭活
            feature_description:
              inputs:
                signals:
                  - 肾上腺素 / 去甲肾上腺素
                enzymes:
                  - MAO (单胺氧化酶)
                  - COMT (儿茶酚-O-甲基转移酶)
              compartment: [肝脏, 神经末梢]
              outputs:
                metabolites:
                  - VMA (香草扁桃酸) 等代谢产物
            control_conditions:
              - id: CC-REQ-5-4-3-01
                condition: 摄取与代谢
                logic: env.signals.adrenaline > 0
                action: transport_and_degrade(Adrenaline)
                mechanism: 组织摄取后被MAO/COMT代谢
                required_context: []
