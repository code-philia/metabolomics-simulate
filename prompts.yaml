top_modules: |
  你是一个熟悉肝脏代谢逻辑的研究员。
  现在用户将肝脏功能的顶层功能总结为了5个顶层模块：
  1) 营养代谢；
  2) 解毒；
  3) 分泌和合成；
  4) 氮处理与尿素循环；
  5) 激素-神经-免疫信号调控。
  每个模块视为一个计算单元：接收来自环境模块的代谢物输入，在条件语句的控制逻辑下，将代谢物或响应输出到环境模块。
  环境模块提供物质资源池，并为计算单元中的条件语句提供必要的物理和化学环境参数。
  
  你需要生成肝脏顶层功能的描述文档：
  · 包括每个计算单元的输入、详细的控制条件语句、输出，以及环境模块包含的参数。
  · 控制条件语句可以是伪代码形式或自然语言形式。
  · 控制条件必须直接影响输出代谢物。
  · 不允许将顶层模块进一步划分为多个小模块。
  · 生成自然语言形式和json格式两种文档，并保证两者对齐。




build_requirements_yaml: |
  参考需求树案例（车票查询）中的格式，按需求树的形式生成需求yaml文档，需求的根部节点是营养代谢、解毒等，营养代谢下面要逐层描述什么是碳水代谢、脂代谢等等、再往下定义糖原合成、脂肪酸合成等等，每个子需求或者子模块也要定义好输入输出的代谢物和控制条件（这个需求中不需要实现UI），最终构成一个层级结构的需求树。

  具体需求：
  从高粒度（如：碳水代谢）自动向下细化到中粒度（如：糖异生、糖原合成），并生成每个细化粒度（模块函数）的完整输入和输出描述、以及控制条件。
  每个模块包含：
    * 模块名称/功能。
    * 完整的代谢物输入列表。
    * 完整的代谢物输出列表。
    * 模块反应发生的详细控制条件。

  5个最顶层模块包括：营养代谢、解毒、分泌和合成、氮处理与尿素循环、激素-神经-免疫信号调控。
  以下是细化的第二层和第三层（营养代谢中的括号内）：
    · 营养代谢模块由碳水代谢(糖原合成与分解，糖异生)，脂代谢(脂类合成，分解与转运)，氨基酸代谢(氨基酸分解，合成与转运)，能量供应与稳态(有氧呼吸产生ATP，酮体生成，离子与渗透压稳态)组成。
    · 解毒模块也可以叫生物转化模块。由氧化还原和结合两个模块组成。通过氧化，还原，结合反应将有毒物质或药物转化为无毒物质。
    · 合成与分泌模块由胆汁酸合成与分泌，血浆蛋白合成，凝血因子合成组成。	
    · 氮处理与尿素循环主要是通过尿素循环将蛋白质/氨基酸代谢产生的氨转化为无毒的尿素。
    · 激素-神经-免疫信号调控模块由激素信号接收与转导，神经信号整合，免疫信号交互三个模块组成。
  每个模块的输入（代谢物质、环境参数）和输出统一从一个环境模块中拿取和放回。



create_code_from_requirements: |
  根据requirements.yaml需求树文档，严格按照规定的输入、输出和控制条件，从下到上地实现各需求功能，不允许遗漏任何一个需求子模块。
  必须全面覆盖ENV-1、REQ-1、REQ-1-1、REQ-1-1-1、REQ-1-1-2、REQ-1-1-3、REQ-1-2、REQ-1-2-1、REQ-1-2-2、REQ-1-2-3、REQ-1-3、REQ-1-3-1、REQ-1-3-2、REQ-1-4、REQ-1-4-1、REQ-1-4-2、REQ-2、REQ-2-1、REQ-2-2、REQ-3、REQ-3-1、REQ-3-2、REQ-3-3、REQ-4、REQ-4-1、REQ-5、REQ-5-1、REQ-5-2、REQ-5-3。
  并自动构建模拟真实肝脏代谢流（非顺序执行）的python代码，并可视化所有代谢物和激素曲线放在一张图上。生成完整的、可运行的模拟代码文件。
  requirements.yaml:
  {requirements_yaml}


detailed_prompts: |
  继续细化requirements.yaml内容，需要考虑：
  1）信号分子可能会被降解或失活，数量和活性是动态变化的。代谢物也可以做信号分子，和受体或酶结合，调控生物过程。
  2）考虑在能量不足的情况下，代谢过程如何被影响。
  3）必要时，添加更下一层的REQ，直到最细粒度的化学反应。每个子REQ仍需要包含input、output、control_conditions。


build_api_interfaces: |
  根据requirement.yaml新建接口文档，不需要函数的具体实现，但需要列出函数之间的调用。


create_constraints: |
  你是一名专攻人体代谢生理学与代谢组学的研究专家，具备人体肝脏代谢网络的定量知识。
  你的任务是基于已知的生理数据与代谢组学共识，给出“正常健康成年人肝细胞（hepatocyte）内”的代谢物浓度区间。

  针对用户提供的一组代谢反应列表，请完成如下步骤：
  * 从所有反应的“输入”和“输出”字段中，提取所有代谢物
  * 去重
  * 生成标准生理命名
  * 保留同一种代谢物的所有变量名

  对每一个唯一代谢物，给出：
  1. 正常健康成年人肝细胞内浓度区间
  2. 下限与上限数值
  3. 单位（统一使用 mM；若<0.01 mM，可使用 μM，但必须注明）
  4. 数量级（mM / μM）
  5. 是否显著受喂食 / 禁食状态影响（true/false）
  6. 可信度评级（high / medium / low）
  7. 简要依据说明（1–2 句，说明是组织测定数据、代谢组学数据或教科书共识）

  必须遵守以下规则：
  * 只讨论肝细胞内浓度（hepatocyte cytosolic or total intracellular）
  * 不可引用血浆、血清或全血浓度
  * 不可使用“较高”“较低”等模糊词语
  * 必须给出数值区间（min 与 max）
  * 不允许输出 null
  * 若数据极其不确定，标记 confidence 为 low，并说明原因
  * 不允许虚构参考文献
  * 所有浓度必须落在合理生理数量级内，若明显偏离，应自行校正。

  输入请读取 docs/detailed_train_cases.yaml 文件中的所有反应。
  输入格式示例：
  * 名称: 糖原合成编排
    * 源函数: orchestrateGlycogenSynthesis
    * 输入: G6P, ATP
    * 输出: 糖原, ADP
    * 简述: 糖原合成的整体调控逻辑。
  （实际任务中将提供多个类似结构的反应）

  输出必须严格使用以下 YAML 结构：
  metabolites:
    - name: ""
      variable_names: []
      normal_range:
        min: 0.0
        max: 0.0
        unit: "mM"
      order_of_magnitude: "mM"
      feeding_state_sensitive: true
      confidence: "high"
      rationale: ""
  如单位为 μM，则：
  unit: "μM"
  order_of_magnitude: "μM"

  最终输出一个完整的文档，保存在 docs/simulate_constraints.yaml。
  > 在输出后，请额外检查：
  > 1. 是否遗漏任何输入或输出代谢物
  > 2. 是否存在数量级明显不符合生理范围的值
  > 3. 是否存在单位不统一情况